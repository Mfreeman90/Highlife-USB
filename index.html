<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Crack - Animated Victory</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600;900&display=swap');
        
        body { 
            margin: 0; 
            background-color: #3e166b;
            color: white; 
            font-family: 'Arial', sans-serif; 
            height: 100vh; 
            overflow: hidden;
            background-image: radial-gradient(circle, rgba(255,255,255,0.05) 1px, transparent 1px);
            background-size: 40px 40px;
        }

        /* Desktop UI */
        .my-pc {
            position: absolute; top: 40px; left: 40px;
            display: flex; flex-direction: column; align-items: center; cursor: pointer; z-index: 5;
        }
        .pc-icon {
            width: 55px; height: 65px; background: linear-gradient(to bottom, #7db9e8 0%, #1e5799 100%);
            border: 2px solid #ffffff; border-radius: 4px; box-shadow: 4px 4px 10px rgba(0,0,0,0.3);
            display: flex; justify-content: center; align-items: center; font-size: 1.8rem;
        }
        .pc-text { margin-top: 8px; font-weight: bold; text-shadow: 2px 2px 4px black; text-align: center; font-size: 0.9rem; }

        .power-off {
            position: absolute; top: 40px; right: 40px;
            display: flex; flex-direction: column; align-items: center; cursor: pointer; z-index: 5;
        }
        .power-circle {
            width: 70px; height: 70px; background: #222; border: 4px solid #ff4444; border-radius: 50%;
            display: flex; justify-content: center; align-items: center; box-shadow: 0 0 20px rgba(255, 68, 68, 0.4); transition: 0.2s;
        }
        .power-circle:hover { transform: scale(1.05); box-shadow: 0 0 30px rgba(255, 68, 68, 0.6); }
        .power-symbol { font-size: 2.5rem; color: #ff4444; font-weight: bold; }
        .power-text { margin-top: 8px; font-weight: bold; text-shadow: 2px 2px 4px black; color: #ccc; font-size: 0.8rem; }

        #shutdown-screen {
            position: fixed; inset: 0; background: black; z-index: 1000;
            display: none; flex-direction: column; justify-content: center; align-items: center;
        }

        .notepad {
            position: absolute; top: 120px; right: 50px; width: 250px;
            background: #f0f0f0; border: 2px solid #888;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.5); color: black;
            font-family: 'Courier New', Courier, monospace; z-index: 50;
        }
        .notepad-header { background: #000080; color: white; padding: 3px 8px; font-size: 0.7rem; display: flex; justify-content: space-between; }
        .notepad-content { padding: 10px; font-weight: bold; font-size: 0.9rem; }

        /* Game Window */
        .window-frame {
            border: 3px solid #5baade; background-color: #050505; width: 900px;
            font-family: 'Orbitron', sans-serif; position: relative; z-index: 10;
        }
        .header { border-bottom: 2px solid #f7931e; padding: 12px; text-align: center; background: #000; }
        .header-title { color: #f7931e; font-size: 3rem; font-weight: 900; margin: 0; letter-spacing: 4px; }
        .sub-header { color: #fdf5a2; font-size: 0.8rem; letter-spacing: 2px; margin-top: -5px; }

        .game-viewport {
            position: relative; height: 550px; margin: 30px auto; width: 800px;
            border: 3px solid #ff0000; background-color: #000; overflow: hidden; 
            background-image: linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px);
            background-size: 50px 50px;
        }

        .target-line { 
            position: absolute; width: 100%; height: 25px; background: #ff0000; 
            top: 50%; transform: translateY(-50%); z-index: 1; 
        }

        .bars-container {
            display: flex; justify-content: center; align-items: center; height: 100%;
            gap: 35px; position: relative; z-index: 10;
        }

        .slider-column { display: flex; flex-direction: column; align-items: center; position: relative; }
        .part { background-color: white; width: 45px; height: 150px; }
        .spacer { height: 40px; background: transparent; width: 100%; } 
        .active .part { outline: 4px solid #fdf5a2; box-shadow: 0 0 15px #fdf5a2; }

        /* Animated Win Message */
        .win-message { 
            position: absolute; top: 50%; left: 50%; transform: translate(-50% , -50%); 
            z-index: 100; background: rgba(0,0,0,0.95); padding: 40px; border: 3px solid #00ff00;
            text-align: center; width: 85%; display: flex; flex-direction: column; align-items: center; gap: 25px;
        }

        .access-text {
            color: #00ff00; font-size: 3.5rem; font-weight: 900;
            text-shadow: 0 0 10px #00ff00;
            display: inline-block;
        }

        .try-again-btn {
            background: #00ff00; color: black; border: none; padding: 12px 40px;
            font-family: 'Orbitron'; font-size: 1.5rem; cursor: pointer; font-weight: 900;
            border-radius: 4px; transition: 0.2s;
        }
        .try-again-btn:hover { background: #fff; transform: scale(1.1); }

        .start-overlay {
            position: absolute; inset: 0; background: rgba(0,0,0,0.95);
            display: flex; justify-content: center; align-items: center; z-index: 200;
        }
        .start-btn {
            background: #f7931e; color: black; border: none; padding: 20px 60px;
            font-family: 'Orbitron'; font-size: 2rem; cursor: pointer; font-weight: 900;
            border-radius: 4px; box-shadow: 0 0 20px rgba(247, 147, 30, 0.4);
        }
    </style>
</head>
<body>
    <div class="my-pc" onclick="alert('Drive C:/ is encrypted.')">
        <div class="pc-icon">üíΩ</div>
        <div class="pc-text">My<br>Computer</div>
    </div>

    <div class="power-off" id="powerBtn">
        <div class="power-circle">
            <span class="power-symbol">‚èª</span>
        </div>
        <div class="power-text">Power Off</div>
    </div>

    <div class="notepad">
        <div class="notepad-header">
            <span>MateoStrap Loves you - Notepad</span>
            <span>‚úñ</span>
        </div>
        <div class="notepad-content">MateoStrap Loves you.</div>
    </div>

    <div id="shutdown-screen">
        <h1 style="font-family: Orbitron; color: #ff4444;">SHUTTING DOWN...</h1>
    </div>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const App = () => {
            const [activeIndex, setActiveIndex] = useState(0);
            const [won, setWon] = useState(false);
            const [started, setStarted] = useState(false);
            const bars = [0, 1, 2, 3, 4, 5, 6]; 
            const refs = useRef(bars.map(() => React.createRef()));
            const animations = useRef([]);
            const audioCtx = useRef(null);

            useEffect(() => {
                const btn = document.getElementById('powerBtn');
                btn.onclick = () => {
                    document.getElementById('shutdown-screen').style.display = 'flex';
                    setTimeout(() => window.location.reload(), 1500);
                };
            }, []);

            // Animation for the win text
            useEffect(() => {
                if (won) {
                    anime({
                        targets: '.access-text',
                        scale: [0.5, 1.1, 1],
                        opacity: [0, 1],
                        duration: 800,
                        easing: 'easeOutElastic(1, .6)'
                    });
                    anime({
                        targets: '.access-text',
                        filter: ['brightness(1)', 'brightness(2)', 'brightness(1)'],
                        loop: true,
                        duration: 1500,
                        easing: 'linear'
                    });
                }
            }, [won]);

            const playSuccessSound = () => {
                if (!audioCtx.current) audioCtx.current = new (window.AudioContext || window.webkitAudioContext)();
                const now = audioCtx.current.currentTime;
                const osc = audioCtx.current.createOscillator();
                const g = audioCtx.current.createGain();
                osc.type = 'square';
                osc.frequency.setValueAtTime(activeIndex === 6 ? 1200 : 800, now);
                g.gain.setValueAtTime(0.1, now);
                g.gain.exponentialRampToValueAtTime(0.001, now + 0.1);
                osc.connect(g);
                g.connect(audioCtx.current.destination);
                osc.start();
                osc.stop(now + 0.1);
            };

            const initGame = () => {
                animations.current.forEach(a => a && a.pause());
                animations.current = bars.map((i) => {
                    let speed = 750 - (i * 90);
                    if (i === 5) speed = 350; 
                    if (i === 6) speed = 280; 
                    return anime({
                        targets: `#col-${i}`,
                        translateY: [-180, 180], 
                        duration: speed,
                        direction: 'alternate',
                        loop: true,
                        easing: 'easeInOutSine'
                    });
                });
            };

            useEffect(() => {
                if (started && !won) initGame();
                return () => animations.current.forEach(a => a && a.pause());
            }, [won, started]);

            const handleInteraction = () => {
                if (won || !started) return;
                const targetRect = document.querySelector('.target-line').getBoundingClientRect();
                const spacerRect = refs.current[activeIndex].current.getBoundingClientRect();
                const isHit = Math.abs((spacerRect.top + spacerRect.height/2) - (targetRect.top + targetRect.height/2)) < 22;

                if (isHit) {
                    playSuccessSound();
                    animations.current[activeIndex].pause();
                    anime({ targets: `#col-${activeIndex}`, translateY: 0, duration: 40 });
                    if (activeIndex === 6) setWon(true);
                    else setActiveIndex(activeIndex + 1);
                } else if (activeIndex > 0) {
                    animations.current[activeIndex - 1].play();
                    setActiveIndex(activeIndex - 1);
                }
            };

            const resetGame = (e) => {
                e.stopPropagation();
                setWon(false);
                setStarted(false);
                setActiveIndex(0);
                bars.forEach(i => anime({ targets: `#col-${i}`, translateY: 0, duration: 0 }));
            };

            useEffect(() => {
                window.addEventListener('mousedown', handleInteraction);
                return () => window.removeEventListener('mousedown', handleInteraction);
            }, [activeIndex, won, started]);

            return (
                <div style={{display:'flex', justifyContent:'center', alignItems:'center', width:'100vw', height:'100vh'}}>
                    <div className="window-frame">
                        {!started && (
                            <div className="start-overlay">
                                <button className="start-btn" onClick={() => setStarted(true)}>START HACK</button>
                            </div>
                        )}
                        <div className="header">
                            <h1 className="header-title">DATA CRACK</h1>
                            <div className="sub-header">EST. 1996 | ENCRYPTION BYPASSED</div>
                        </div>
                        <div className="game-viewport">
                            <div className="target-line" />
                            <div className="bars-container">
                                {bars.map((i) => (
                                    <div key={i} id={`col-${i}`} className={`slider-column ${i === activeIndex ? 'active' : ''}`}>
                                        <div className="part" />
                                        <div className="spacer" ref={refs.current[i]} />
                                        <div className="part" />
                                    </div>
                                ))}
                            </div>
                            {won && (
                                <div className="win-message">
                                    <span className="access-text">ACCESS GRANTED</span>
                                    <button className="try-again-btn" onClick={resetGame}>TRY AGAIN</button>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
